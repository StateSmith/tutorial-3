<html>

<head>
    <script src="LightSm.js"></script> <!-- Include the generated state machine js -->
    <script src="LightSmContext.js"></script> <!-- Include the user hand written js -->
    <script src="LightController.js"></script> <!-- Include the user hand written js -->
</head>

<body>
    <div>
        <h2>Light Bulb 1</h2>
        <div id="id-light-bulb-1" style="width: 100px; height: 100px;"></div>
        <br>
        <button onclick="offPress1()">OFF</button>
        <button onclick="onPress1()">ON</button>
    </div>

    <div>
        <h2>Light Bulb 2</h2>
        <div id="id-light-bulb-2" style="width: 100px; height: 100px;"></div>
        <br>
        <button onclick="offPress2()">OFF</button>
        <button onclick="onPress2()">ON</button>
    </div>
</body>

<script>
    // a little bit of javascript that sends the button presses to light controllers

    const lightController1 = new LightController(document.getElementById('id-light-bulb-1'));
    function onPress1()  { lightController1.handleOnPress();  }
    function offPress1() { lightController1.handleOffPress(); }

    const lightController2 = new LightController(document.getElementById('id-light-bulb-2'));
    function onPress2()  { lightController2.handleOnPress();  }
    function offPress2() { lightController2.handleOffPress(); }

    // periodically tell controllers to update AKA send 'DO' events to their state machines
    setInterval(() => {
        lightController1.update();
        lightController2.update();
    }, 100);
</script>

</html>